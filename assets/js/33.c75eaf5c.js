(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{434:function(t,e,a){"use strict";a.r(e);var s=a(34),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"项目优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目优化"}},[t._v("#")]),t._v(" 项目优化")]),t._v(" "),a("h3",{attrs:{id:"首屏优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#首屏优化"}},[t._v("#")]),t._v(" 首屏优化")]),t._v(" "),a("ol",[a("li",[t._v("图片懒加载")])]),t._v(" "),a("h3",{attrs:{id:"开发体验优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发体验优化"}},[t._v("#")]),t._v(" 开发体验优化")]),t._v(" "),a("h4",{attrs:{id:"切换test-pre-online环境"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#切换test-pre-online环境"}},[t._v("#")]),t._v(" 切换test pre online环境")]),t._v(" "),a("h4",{attrs:{id:"如何定位性能瓶颈"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何定位性能瓶颈"}},[t._v("#")]),t._v(" 如何定位性能瓶颈")]),t._v(" "),a("blockquote",[a("p",[t._v("控制台观察")])]),t._v(" "),a("ul",[a("li",[t._v("观察js css 图片的加载速率")]),t._v(" "),a("li",[t._v("performance\n"),a("ol",[a("li",[t._v("看饼状图 看性能瓶颈")]),t._v(" "),a("li",[t._v("准备发起请求")])])])]),t._v(" "),a("h4",{attrs:{id:"网络"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络"}},[t._v("#")]),t._v(" 网络")]),t._v(" "),a("ul",[a("li",[t._v("DSN(DNS预解析DNS Prefetch)")]),t._v(" "),a("li",[t._v("建立TCP连接（减少http请求的量 资源整合） 请求资源 返回资源 渲染domm")])]),t._v(" "),a("h4",{attrs:{id:"webpack"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack"}},[t._v("#")]),t._v(" webpack")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("基础环境")]),t._v(" "),a("ol",[a("li",[t._v("include exclude")]),t._v(" "),a("li",[t._v("压缩打包")]),t._v(" "),a("li",[t._v("分包处理\n"),a("ol",[a("li",[t._v("懒加载路由")]),t._v(" "),a("li",[t._v("splitChunks")]),t._v(" "),a("li",[t._v("dll 抽取公用的模块")])])])])]),t._v(" "),a("li",[a("p",[t._v("测试环境")]),t._v(" "),a("ol",[a("li",[a("code",[t._v("unused-files-webpack-plugin")]),t._v(" 没有使用到的文件")]),t._v(" "),a("li",[a("code",[t._v("webpack-bundle-analyzer")]),t._v(" 分析包的大小 上传到远端查看")]),t._v(" "),a("li",[a("code",[t._v("sw-precache-webpack-plugin")]),t._v(" 打包速度")]),t._v(" "),a("li",[a("code",[t._v("webpack-dev-server")]),t._v(" 开启热更新")])])])]),t._v(" "),a("h4",{attrs:{id:"nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx"}},[t._v("#")]),t._v(" nginx")]),t._v(" "),a("ul",[a("li",[t._v("配置里 index.html no-store")]),t._v(" "),a("li",[t._v("js css png图片等使用 expires max")]),t._v(" "),a("li",[t._v("开启了gzip")])]),t._v(" "),a("h4",{attrs:{id:"离线化平台"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#离线化平台"}},[t._v("#")]),t._v(" 离线化平台")]),t._v(" "),a("ol",[a("li",[t._v("部署信息\n"),a("ol",[a("li",[t._v("构建时间")]),t._v(" "),a("li",[t._v("构建人")]),t._v(" "),a("li",[t._v("构建文件")]),t._v(" "),a("li",[t._v("提交信息（commitID）分支")]),t._v(" "),a("li",[t._v("等等")])])])]),t._v(" "),a("h2",{attrs:{id:"项目监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目监控"}},[t._v("#")]),t._v(" 项目监控")]),t._v(" "),a("h3",{attrs:{id:"错误监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#错误监控"}},[t._v("#")]),t._v(" 错误监控")]),t._v(" "),a("p",[t._v("[常见的错误拦截]（"),a("a",{attrs:{href:"https://blog.fundebug.com/2018/12/07/how-to-handle-frontend-error/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.fundebug.com/2018/12/07/how-to-handle-frontend-error/"),a("OutboundLink")],1),t._v("）")]),t._v(" "),a("ol",[a("li",[a("p",[a("code",[t._v("window.onerror()")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onerror")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("message"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" source"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" lineno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" colno"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('// message：错误信息（字符串）。可用于HTML onerror=""处理程序中的event。')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// source：发生错误的脚本URL（字符串）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// lineno：发生错误的行号（数字）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// colno：发生错误的列号（数字）")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// error：Error对象（对象） ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br")])]),a("ul",[a("li",[t._v("如果想通过onerror函数收集不同域的js错误，我们需要做两件事：\n"),a("ul",[a("li",[t._v("相关的js文件上加上"),a("code",[t._v("Access-Control-Allow-Origin:*")]),t._v("的response header")]),t._v(" "),a("li",[t._v("引用相关的js文件时加上crossorigin属性")])])])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("unhandledrejection")]),t._v(" 继承自 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/PromiseRejectionEvent",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("PromiseRejectionEvent")]),a("OutboundLink")],1),t._v("，而 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/PromiseRejectionEvent",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("PromiseRejectionEvent")]),a("OutboundLink")],1),t._v(" 又继承自 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Event",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Event")]),a("OutboundLink")],1),t._v("。因此"),a("code",[t._v("unhandledrejection")]),t._v(" 含有 "),a("code",[t._v("PromiseRejectionEvent")]),t._v(" 和 "),a("code",[t._v("Event")]),t._v(" 的属性和方法。")]),t._v(" "),a("ul",[a("li",[t._v("当"),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Promise")]),a("OutboundLink")],1),t._v(" 被 reject 且没有 reject 处理器的时候，会触发 "),a("strong",[a("code",[t._v("unhandledrejection")])]),t._v(" 事件；这可能发生在 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Window",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("window")]),a("OutboundLink")],1),t._v(" 下，但也可能发生在 "),a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Worker",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("Worker")]),a("OutboundLink")],1),t._v(" 中。 这对于调试回退错误处理非常有用。")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unhandledrejection"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("event")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("warn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("UNHANDLED PROMISE REJECTION: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("event"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("reason"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("try catch")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])])]),t._v(" "),a("li",[a("p",[t._v("vue")])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://cn.vuejs.org/v2/api/#errorCaptured",target:"_blank",rel:"noopener noreferrer"}},[t._v("errorCaptured"),a("OutboundLink")],1),t._v("钩子")])]),t._v(" "),a("li",[a("p",[t._v("sentry")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("对window.onerror和unhandlerejection的重写")])]),t._v(" "),a("li",[a("p",[t._v("跨浏览的兼容")])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000023089675",target:"_blank",rel:"noopener noreferrer"}},[t._v("sentry原理"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[a("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/75577689",target:"_blank",rel:"noopener noreferrer"}},[t._v("源码解析 知乎"),a("OutboundLink")],1)])]),t._v(" "),a("li",[a("p",[t._v("window.onerror")]),t._v(" "),a("ul",[a("li",[t._v("只能捕获运行时错误")]),t._v(" "),a("li",[t._v("无法捕获语法错误")]),t._v(" "),a("li",[t._v("无法捕获资源加载错误（可使用window.addEventListener('error')  资源加载错误的节点活冒泡到window对象， 并且没法知道错误码）")])])])])])]),t._v(" "),a("h3",{attrs:{id:"埋点监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#埋点监控"}},[t._v("#")]),t._v(" 埋点监控")]),t._v(" "),a("p",[t._v("阅读tracker源码")]),t._v(" "),a("h3",{attrs:{id:"性能监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#性能监控"}},[t._v("#")]),t._v(" 性能监控")]),t._v(" "),a("p",[t._v("利用"),a("code",[t._v("window.performance")]),t._v("来统计")]),t._v(" "),a("h3",{attrs:{id:"敏感数据反爬"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#敏感数据反爬"}},[t._v("#")]),t._v(" 敏感数据反爬")]),t._v(" "),a("ol",[a("li",[t._v("css font\n"),a("ul",[a("li",[t._v("自己生成wotff")]),t._v(" "),a("li",[t._v("不同的unicode码对应数字")]),t._v(" "),a("li",[t._v("规则给到后端")]),t._v(" "),a("li",[t._v("后端对敏感数字返回相对应的unicode")]),t._v(" "),a("li",[t._v("前端通过自定义字体解析unicode展示响应的内容")])])])]),t._v(" "),a("h2",{attrs:{id:"native-sdk"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#native-sdk"}},[t._v("#")]),t._v(" native-sdk")]),t._v(" "),a("h3",{attrs:{id:"h5和nativa通信"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h5和nativa通信"}},[t._v("#")]),t._v(" h5和nativa通信")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("native在webview的全局"),a("code",[t._v("window")]),t._v("对象下面挂载了一个全局对象"),a("code",[t._v("webviewJsBridge")])])]),t._v(" "),a("li",[a("p",[a("code",[t._v("webviewJsBridge")]),t._v("中有"),a("code",[t._v("callHandler")]),t._v("和"),a("code",[t._v("registter")]),t._v("方法")])]),t._v(" "),a("li",[a("p",[t._v("h5调用native方法使用")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webviewJsBridge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("callHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("apiName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("三种 js 调用 native 方法")]),t._v(" "),a("ul",[a("li",[t._v("拦截 Url Schema（假请求）")]),t._v(" "),a("li",[t._v("拦截 prompt alert confirm")]),t._v(" "),a("li",[t._v("注入 JS 上下文")])])]),t._v(" "),a("li",[a("p",[t._v("native调用js")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("webviewJsBridge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("registerHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("apiName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" callback"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])])])]),t._v(" "),a("p",[a("img",{attrs:{src:"/interview//native-sdk/%E9%80%9A%E4%BF%A11.png",alt:"图1"}}),t._v(" "),a("img",{attrs:{src:"/interview//native-sdk/%E9%80%9A%E4%BF%A12.png",alt:"通信2"}})]),t._v(" "),a("h3",{attrs:{id:"h5调用native"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#h5调用native"}},[t._v("#")]),t._v(" h5调用native")]),t._v(" "),a("p",[a("img",{attrs:{src:"/interview//native-sdk/h5%E8%B0%83%E7%94%A8native.png",alt:"h5调用native"}})]),t._v(" "),a("h3",{attrs:{id:"native调用h5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#native调用h5"}},[t._v("#")]),t._v(" native调用h5")]),t._v(" "),a("p",[a("img",{attrs:{src:"/interview//native-sdk/native%E8%B0%83%E7%94%A8h5.png",alt:"native调用h5"}})]),t._v(" "),a("h3",{attrs:{id:"参考资料"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[t._v("#")]),t._v(" 参考资料")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000025182935",target:"_blank",rel:"noopener noreferrer"}},[t._v("JSBridge 实现原理解析"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"其他"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其他"}},[t._v("#")]),t._v(" 其他")]),t._v(" "),a("h3",{attrs:{id:"抓包"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#抓包"}},[t._v("#")]),t._v(" 抓包")]),t._v(" "),a("ol",[a("li",[t._v("charles")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/wuchangming/spy-debugger",target:"_blank",rel:"noopener noreferrer"}},[t._v("spy-debugger"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://wproxy.org/whistle/questions.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("whistlejs"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"cdn"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cdn"}},[t._v("#")]),t._v(" CDN")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://segmentfault.com/a/1190000039045541",target:"_blank",rel:"noopener noreferrer"}},[t._v("cdn为什么快，原理"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.huaweicloud.com/zhishi/cdn001.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("cdn回源"),a("OutboundLink")],1)])]),t._v(" "),a("h3",{attrs:{id:"spa页面-和-多页面对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spa页面-和-多页面对比"}},[t._v("#")]),t._v(" spa页面 和 多页面对比")]),t._v(" "),a("ul",[a("li",[a("p",[a("a",{attrs:{href:"https://juejin.cn/post/6913436819115737102",target:"_blank",rel:"noopener noreferrer"}},[t._v("spa和多页面的优势和缺点"),a("OutboundLink")],1),t._v("\nspa")])]),t._v(" "),a("li",[a("p",[t._v("优点")]),t._v(" "),a("ol",[a("li",[t._v("切换的流畅度比较高")]),t._v(" "),a("li",[t._v("前后端分离，利于维护")]),t._v(" "),a("li",[t._v("减轻服务端压力")]),t._v(" "),a("li",[t._v("跳转动画有优化的空间")])])]),t._v(" "),a("li",[a("p",[t._v("缺点")]),t._v(" "),a("ol",[a("li",[t._v("seo不友好")]),t._v(" "),a("li",[t._v("一次要加载所有资源（可使用路由懒加载）")]),t._v(" "),a("li",[t._v("需要额外的管理路由（不能使用浏览器天然的前进后退）\n"),a("ul",[a("li",[t._v("这里需要去复习弄清楚 vue-router的原理")])])])])])]),t._v(" "),a("blockquote",[a("p",[t._v("mpa")])]),t._v(" "),a("ul",[a("li",[t._v("优点\n"),a("ol",[a("li",[t._v("seo友好")]),t._v(" "),a("li",[t._v("首屏加载快")])])]),t._v(" "),a("li",[t._v("缺点\n"),a("ol",[a("li",[t._v("每次都需要去加载公告的资源（js, css, html，图片等）")]),t._v(" "),a("li",[t._v("页面跳转没有跳转动画")]),t._v(" "),a("li",[t._v("项目维护起来比较麻烦，重复的代码较大")])])])]),t._v(" "),a("h4",{attrs:{id:"解决方案"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[t._v("#")]),t._v(" 解决方案")]),t._v(" "),a("ul",[a("li",[t._v("可使用ssr方案解决")])]),t._v(" "),a("h2",{attrs:{id:"项目介绍思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目介绍思路"}},[t._v("#")]),t._v(" 项目介绍思路")]),t._v(" "),a("h3",{attrs:{id:"思路和角度"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#思路和角度"}},[t._v("#")]),t._v(" 思路和角度")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("业务相关")]),t._v(" "),a("ol",[a("li",[t._v("业务数据 tracker")]),t._v(" "),a("li",[t._v("业务流程（业务理解）")]),t._v(" "),a("li",[t._v("项目规划")])])]),t._v(" "),a("li",[a("p",[t._v("技术相关")]),t._v(" "),a("ol",[a("li",[a("p",[t._v("采集业务数据 tracker")])]),t._v(" "),a("li",[a("p",[t._v("性能监控")])]),t._v(" "),a("li",[a("p",[t._v("错误捕获 sentry")])]),t._v(" "),a("li",[a("p",[t._v("错误监控")]),t._v(" "),a("ol",[a("li",[t._v("页面错误")]),t._v(" "),a("li",[t._v("接口错误")])])]),t._v(" "),a("li",[a("p",[t._v("代码质量")]),t._v(" "),a("ol",[a("li",[t._v("sonar")]),t._v(" "),a("li",[t._v("ts")]),t._v(" "),a("li",[t._v("elsint stylelint husky")]),t._v(" "),a("li",[t._v("代码review")])])]),t._v(" "),a("li",[a("p",[t._v("项目优化")]),t._v(" "),a("ol",[a("li",[t._v("首页优化")]),t._v(" "),a("li",[t._v("打包优化 html, js, css\n"),a("ol",[a("li",[t._v("分包")]),t._v(" "),a("li",[t._v("压缩")]),t._v(" "),a("li",[t._v("tree shaking")]),t._v(" "),a("li",[t._v("抽离css")]),t._v(" "),a("li",[t._v("webpack 其他优化问题")])])]),t._v(" "),a("li",[t._v("开发（体验）阶段优化")]),t._v(" "),a("li",[t._v("cdn")]),t._v(" "),a("li",[t._v("ssr")]),t._v(" "),a("li",[t._v("离线化")])])]),t._v(" "),a("li",[a("p",[t._v("代码重构")])]),t._v(" "),a("li",[a("p",[t._v("字体反爬")])]),t._v(" "),a("li",[a("p",[t._v("native-sdk原理")])])])])]),t._v(" "),a("h3",{attrs:{id:"项目亮点难点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目亮点难点"}},[t._v("#")]),t._v(" 项目亮点难点")]),t._v(" "),a("ul",[a("li",[t._v("typescript")]),t._v(" "),a("li",[t._v("sentry")]),t._v(" "),a("li",[t._v("友商过户评分 用到zrender 绘制了评分雷达图")]),t._v(" "),a("li",[t._v("重构\n"),a("ul",[a("li",[a("p",[t._v("重构原因")]),t._v(" "),a("ul",[a("li",[t._v("项目各个列表 和 订单耦合度过大，添加新功能时改动过大")]),t._v(" "),a("li",[t._v("向公司的ske-cli脚手架靠拢，统一开发模式")]),t._v(" "),a("li",[t._v("引入typescript 代码的约束")])])]),t._v(" "),a("li",[a("p",[t._v("重构的方案")]),t._v(" "),a("ul",[a("li",[t._v("创建新到的代码到src目录下，把久的项目放入old的目录下， 分别打包，把最后的dist包合并到一起")]),t._v(" "),a("li",[t._v("新老页面跳转 replace的方式跳转（封装了跳转方法，过渡阶段需要使用）")]),t._v(" "),a("li",[t._v("抽离公用组件")]),t._v(" "),a("li",[t._v("抽离页面代码 解耦")]),t._v(" "),a("li",[t._v("新老页面跳转 白屏问题")]),t._v(" "),a("li",[t._v("加入单元测试")])])]),t._v(" "),a("li",[a("p",[t._v("重构顺序和重构时机")]),t._v(" "),a("ul",[a("li",[t._v("制定了重构的计划： 列出步骤和方向")]),t._v(" "),a("li",[t._v("把不流量小的页面首先抽离重构")]),t._v(" "),a("li",[t._v("二级页面，或者三级页面重构")]),t._v(" "),a("li",[t._v("抽离出一些公用的模块 button，头部，没网，没数据的组件，toast,dialog组件，或者native方法封装")]),t._v(" "),a("li",[t._v("最后重构一级页面，和改动频繁的页面，建立新的测试分支")]),t._v(" "),a("li",[t._v("每个模块的完事后的自测 开会codereview代码，测试环境的部署，稳定一段时间后，合分支准上线")])])]),t._v(" "),a("li",[a("p",[t._v("遇到的问题")]),t._v(" "),a("ul",[a("li",[t._v("新老页面白屏问题（nginx配置缓存html）")]),t._v(" "),a("li",[t._v("eslint冲突")]),t._v(" "),a("li",[t._v("新旧页面的baseUrl不同，协调客户端进行强更")]),t._v(" "),a("li",[t._v("兜底方案 nginx重定向，把旧的页面重定向到新的页面")]),t._v(" "),a("li",[t._v("健康检查 url改变，导致健康检查过不去，更新部署包")])])]),t._v(" "),a("li",[a("p",[t._v("重定向\n保证没有强制更新的用户 能够用正常跳转到页面")]),t._v(" "),a("div",{staticClass:"language-nginx line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" ~ /partners_app/brokerage-agency.html")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rewrite")]),t._v(" /partners_app/brokerage-agency.html(.*) /partners_app/"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" permanent")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])])])])])])])}),[],!1,null,null,null);e.default=r.exports}}]);